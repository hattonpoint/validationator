"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}var getFuncParamNames=require("./utilities/getFuncParamNames"),matchesAny=require("./utilities/matchesAny"),validate=require("./validate"),validateFunc=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};try{var d=c.name||a.name;if(b=Array.isArray(b)?b:[b],("production"===process.env.NODE_ENV||c.off)&&!c.on)return a.apply(void 0,_toConsumableArray(b));var e=a.inputModel,f=a.outputModel;if(!a)throw new Error("Missing required argument func");if("function"!=typeof a)throw new Error("First argument is not a function!");if(!e&&!f)throw new Error("ERROR: No validation props set for "+d+". Please specify "+d+".inputModel or "+d+".outputModel");e&&!f&&validateInput(b,e,a,d),f&&!e&&validate(a.apply(void 0,_toConsumableArray(b)),f,{name:d}),e&&f&&(validateInput(b,e,a,d),validate(a.apply(void 0,_toConsumableArray(b)),f,{name:d}))}catch(d){if(c.warn)return console.warn(d),a.apply(void 0,_toConsumableArray(b));throw d}return a.apply(void 0,_toConsumableArray(b))},validateInput=function(a,b,c,d){var e=getFuncParamNames(c);if("string"==typeof b.type||"string"==typeof b){if(1<a.length)throw new Error("ERROR: "+d+" expected 1 parameter but received "+a.length);return void validate(a[0],b,{name:e[0]})}if(Array.isArray(b)){if(b.length!==e.length)throw new Error("ERROR: parameters and input model for "+d+" are out of sync. There are "+b.length+" entries to the inputModel and "+e.length+" paramerters.");if(!Array.isArray(a))throw new Error("ERROR: Multiple params must me passed into validateFunc as an array.");return void b.forEach(function(b,c){validate(a[c],b,{name:e[c]})})}if("object"===("undefined"==typeof b?"undefined":_typeof(b))){if(a=a[0],"object"!==("undefined"==typeof a?"undefined":_typeof(a))||Array.isArray(a))throw new Error("Error: Expected a single object as the sole function param (ES6 parameter destructuring).");var f=Object.keys(b),g=Object.keys(a);if(f.length!==g.length)throw new Error("ERROR: parameters and input model for "+d+" are out of sync. There are "+f.length+" entries to the inputModel and "+g.length+" paramerters.");return g.forEach(function(a){if(!matchesAny(a,e))throw new Error("ERROR: The paramKey '"+a+"' does not match any of the available parameters: "+e.toString());if(!matchesAny(a,f))throw new Error("ERROR: The paramKey '"+a+"' has not been included "+d+".inputModel")}),void f.forEach(function(c){validate(a[c],b[c],{name:c})})}throw new Error("UNKNOWN ERROR: the function input model did not match the api spec.")};module.exports=validateFunc;